{% from 'macros/start_pagination.html' import start_pagination %}
{% extends "base.html" %}

{% block content %}

<div class="back-link">
<span class="material-symbols-rounded">chevron_backward</span>
<a href="../">Back to objects</a>
</div>

<p class="subtle-heading">Object</p>

<h1 class="mb-2">{{ object.title }}</h1>

<div class="object-flex-layout mb-2">
<section>
  <h2 class="mt-0 pt-1_5">About this object</h2>
  <dl class="object-list">
    <dt>Identifier</dt>
    <dd>{{ object.identifier }}</dd>

    <dt>Alternate identifier</dt>
    <dd>{{ object.alternate_identifiers }}</dd>

    <dt>Description</dt>
    <dd>{{ object.description }}</dd>

    <dt>Date ingested:</dt>
    <dd>{{ object.created_at }}</dd>

    <dt>Total size: </dt>
    <dd>{{ object.total_data_size }}</dd>

    <dt>Number of filesets:</dt>
    <dd>{{ object.filesets|length }}</dd>

    <dt>Type</dt>
    <dd>{{ object.type }}</dd>

    <dt>Revisions</dt>
    <dd>{{ object.revision_number}}</dd>
  </dl>

  <details class="details-with-border">
    <summary>View object descriptor and metadata files</summary>
    <div class="details-contents-wrapper">
      <h3>Object descriptor and metadata</h3>
        <div class="table-wrapper">
          <table class="m-table">
            <thead>
            <tr>
              <th>File name</td>
              <th>Size</td>
              <th>Action</td>
            </tr>
            </thead>
            <tbody>
              <!--Add table loop--> 
             <tr>
              <td class="mono">Descriptor</td>
              <td>1GB</td>
              <td><button class="button--link">Download file</button></td>
            </tr>
            <tr>
              <td class="mono">Metadata</td>
              <td>1GB</td>
              <td><button class="button--link">Download file</button></td>
            </tr>
            <tr>
              <td class="mono">Metadata</td>
              <td>1GB</td>
              <td><button class="button--link">Download file</button></td>
            </tr>
            </tbody>
          </table>
        </div>
    </div>
  </details>
</section>

<section>
  <div class="object-event-history--container">
    <h2 class="mt-0 pt-1_5">Object event history</h2>
    <div class="button-group-column">
      <button id="openDialogBtn1" type="button" class="button-outline-variant ingest-start"><span class="label">Ingestion start</span> <span>2021-07-06 9:44:31</span></button>
      <button class="button-outline-variant ingest-end"><span class="label">Ingestion end</span> <span>2021-07-06 9:44:31</span></button>
      <button class="button-outline-variant ingest-start"><span class="label">Ingestion start</span> <span>2021-07-06 9:44:31</span></button>
      <button class="button-outline-variant ingest-end"><span class="label">Ingestion end</span> <span>2021-07-06 9:44:31</span></button>
    </div>
    {% include '/partials/_dialog.html' %}
  </div>
</section>
</div>

<h2>Filesets</h2>
<p class="prose pb-1">
  A list of filesets in this object, labeled by source file name, and listed in order. 
  To view the metadata for and complete fileset, select the caret to the left of the filename. 
  Expanded details will appear, along with the ability to download individual files or entire filesets.
</p>
<div class="mb-1">
<p>Showing {{ filesets_page.range }} of {{ filesets_page.total_items }} filesets</p>
{% for fileset in filesets_page.items %}
<details>
  <summary class="mono">source file name <span class="order-label">{{ fileset.order_label }}</span></summary>
  <div class="details-contents-wrapper">
    <h3 class="mt-0 pt-1">About this fileset</h3>
    <ul class="two-column">
      <li>Total size:</li>
      <li>Ingested:</li>
       <li>Type:</li>
      <li>Last fixity:</li>
    </ul>
    <h3>Fileset contents</h3>
    <div class="table-wrapper">
    <table class="m-table">
      <thead>
        <tr>
          <th>File name</td>
          <th>Size</td>
          <th>Action</td>
        </tr>
      </thead>
      <tbody>
      <!--Add table loop--> 
        <tr>
          <td class="mono"><span class="file-name-flex"><span class="badge badge--source">source</span>hereisafakefilename0000.jpg</span></td>
          <td>1GB</td>
          <td><button class="button--link">Download file</button></td>
        </tr>
        <tr>
          <td class="mono"><span class="file-name-flex"><span class="badge badge--service">service</span>hereisafakefilename0001.jpg</span></td>
          <td>1GB</td>
          <td><button class="button--link">Download file</button></td>
        </tr>
      </tbody>
    </table>
    <button class="button button--ghost mb-2">View fileset descriptor and metadata files</button>
    </div>
    <button class="button button--secondary">Download fileset</button>
  </div>
</details>
{% endfor %}
</div>
{{ start_pagination(
  page=filesets_page,
  url=request.url,
  id_suffix="Filesets",
  start_key="fileset_start"
) }}

<section class="mb-4">
<h2>Actions</h2>
<button class="button button--primary">Download object</button>
<button class="button button--delete">Delete object</button>
</section>
{% endblock %}
